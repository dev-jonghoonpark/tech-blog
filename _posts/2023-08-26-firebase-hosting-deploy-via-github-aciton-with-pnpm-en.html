---
layout: post
title: "[pnpm] firebase hosting deploy via github aciton"
date: "2023-08-26 03:39:25 +0900"
categories:
  - 개발
tags:
  - github
  - github action
  - pnpm
  - ci
  - firebase
  - firebase deploy
  - firebase hosting
  - deploy
  - hosting
---

<p>
  This post explains how to connect firebase hosting and github action in a pnpm
  based project.
</p>
<p>
  In firebase cli, it provides integration of hosting and github action by
  default.
</p>
<p>
  <a
    href="https://firebase.google.com/docs/hosting/github-integration?hl=en"
    title="Deploy to live &amp; preview channels via GitHub pull requests"
    >Deploy to live &amp; preview channels via GitHub pull requests</a
  >
</p>
<p>
  When integrating through this method, a github workflow file will be
  created.<br />
  (firebase-hosting-merge.yml, firebase-hosting-pull-request.yml)
</p>
<p>
  The contents are as follows.<br />
  (You only need to look at the jobs part. It is explained based on
  firebase-hosting-merge.yml.)
</p>
<pre><code># This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
&#039;on&#039;:
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm ci &amp;&amp; npm run build
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: &#039;${{ secrets.GITHUB_TOKEN }}&#039;
          firebaseServiceAccount: &#039;${{ secrets.FIREBASE_SERVICE_ACCOUNT_YOUR_PROJECT_ID }}&#039;
          channelId: live
          projectId: your_project_id</code></pre>
<p>
  In this state, to proceed with install and build through pnpm, modify as
  follows.
</p>
<pre><code># This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
&quot;on&quot;:
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: install dependencies and build
        run: pnpm install --frozen-lockfile &amp;&amp; pnpm run build

      - name: deploy to firebase
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: &quot;${{ secrets.GITHUB_TOKEN }}&quot;
          firebaseServiceAccount: &quot;${{ secrets.FIREBASE_SERVICE_ACCOUNT_YOUR_PROJECT_ID }}&quot;
          channelId: live
          projectId: your_project_id</code></pre>
<p>
  If you modify the code and push it to github,<br />
  You can see that it is built and reflected successfully.
</p>
<p>
  <img
    src="https://jonghoonpark.com/wp-content/uploads/2023/08/image-1692986194957.png"
    alt="github action"
  />
</p>
<p>
  <img
    src="https://jonghoonpark.com/wp-content/uploads/2023/08/image-1692986298235.png"
    alt="firebase hosting deploy"
  />
</p>
