---
layout: post
title: "[pnpm] firebase hosting과 github action 연결하기"
date: "2023-08-26 03:00:23 +0900"
description: pnpm 기반의 프로젝트에서 Firebase Hosting과 GitHub Action을 연결하는 방법을 설명하며, GitHub pull 요청을 통해 실시간 및 미리보기 채널에 배포하는 과정을 안내합니다. 기본적으로 Firebase Hosting은 GitHub Action과의 통합을 지원하며, 생성된 GitHub 워크플로우 파일을 수정하여 pnpm을 통해 의존성 설치 및 빌드를 수행할 수 있습니다.
categories:
  - 개발
tags:
  - github
  - github action
  - pnpm
  - ci
  - firebase
  - firebase deploy
  - firebase hosting
  - 배포
  - deploy
  - hosting
  - 호스팅
---

<p>
  이 포스트는 pnpm 기반의 프로젝트에서 firebase hosting과 github action 연결하는
  법에 대해서 설명한다.
</p>
<p>기본적으로 firebase hosting 에서는 github action과 연결을 제공한다.</p>
<p>
  <a
    href="https://firebase.google.com/docs/hosting/github-integration?hl=ko"
    title="GitHub pull 요청을 통해 실시간 및 미리보기 채널에 배포"
    >GitHub pull 요청을 통해 실시간 및 미리보기 채널에 배포</a
  >
</p>
<p>
  이 방법을 통해 생성을 하게 되면 github workflow 파일이 생성된다.<br />
  (firebase-hosting-merge.yml, firebase-hosting-pull-request.yml)
</p>
<p>
  내용은 다음과 같다. (jobs 부분만 보면 된다. 두 파일 다 원리는 동일하기 때문에
  firebase-hosting-merge.yml 을 기준으로 설명한다.)
</p>
<pre><code># This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
&#039;on&#039;:
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm ci &amp;&amp; npm run build
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: &#039;${{ secrets.GITHUB_TOKEN }}&#039;
          firebaseServiceAccount: &#039;${{ secrets.FIREBASE_SERVICE_ACCOUNT_YOUR_PROJECT_ID }}&#039;
          channelId: live
          projectId: your_project_id</code></pre>
<p>
  이 상태에서 pnpm을 통해 install 과 build를 진행하려면 다음과 같이 수정해주면
  된다.
</p>
<pre><code># This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
&quot;on&quot;:
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: install dependencies and build
        run: pnpm install --frozen-lockfile &amp;&amp; pnpm run build

      - name: deploy to firebase
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: &quot;${{ secrets.GITHUB_TOKEN }}&quot;
          firebaseServiceAccount: &quot;${{ secrets.FIREBASE_SERVICE_ACCOUNT_YOUR_PROJECT_ID }}&quot;
          channelId: live
          projectId: your_project_id</code></pre>
<p>
  코드를 수정하여 반영하면 정상적으로 빌드되고 반영되는 것을 확인할 수 있다.<br />
  <img
    src="/assets/images/2023-08-26-firebase-hosting-deploy-via-github-aciton-with-pnpm/image1.png"
    alt="github action"
  />
</p>
<p>
  <img
    src="/assets/images/2023-08-26-firebase-hosting-deploy-via-github-aciton-with-pnpm/image2.png"
    alt="firebase hosting deploy"
  />
</p>
